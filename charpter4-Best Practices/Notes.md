## 平稳退化

如果正确使用了 JavaScript 脚本，就可以让访问者在他们的浏览器不支持 JavaScript 的情况下仍能顺利地浏览你的网站，这就是所谓的`平稳退化`，就是说，虽然某些功能无法使用，但最基本的操作仍能顺利完成。

### "javascript:"伪协议

"javascript:"伪协议让我们通过一个链接来调用 JavaScript 函数。下面是通过"javascript:"伪协议调用 popUp()函数的具体做法：

```html
<a href="javascript:popUp('https://www.baidu.com');">百度一下，你就知道。</a>
```

`支持这种伪协议但禁用了JavaScript功能的浏览器会什么也不做。总之，在HTML文档里通过"javascript;"伪协议调用JavaScript代码的做法非常不好。`

```html
<a href="https://www.baidu.com" onclick="popUp(this.href); return false;"
  >百度一下，你就知道。</a
>
```

在把 href 属性设置为真实存在的 URL 地址后，即使 JavaScript 已被禁用，这个链接也是可用的。虽然这个链接在功能上打了点折扣（因为它没有打开一个新窗口），但它没有彻底失效，这是一个经典的"平稳退化"的例子。

## 渐进增强

所谓“渐进增强”就是用一些额外的信息层去包裹原始数据。按照“渐进增强”原则创建出来的网页几乎都符合“平稳退化”原则。

## 分离 JavaScript

具体步骤：

1. 把文档里的所有链接全放入一个数组里。
2. 遍历数组
3. 如果某个链接的 class 属性等于 popup，就表示这个链接在被点击时应该调用 popUp()函数。
4. popUp()函数的 onclick 事件添加到有关的链接上。只要把它们存入一个外部 JavaScript 文件。就等于是把这些操作从 HTMML 文档里分离出来了，而这就是“分离 JavaScript”的含义。
   `必须让这些代码在HTML文档全部加载到浏览器之后马上开始执行。调用window.onload事件`

## 向后兼容

“如果你不理解这个方法，请离开”

```js
if (!document.getElementById || document.getElementsByTagName) return false;
```

## 性能考虑

### 尽量减少访问 DOM 和尽量减少标记

访问 DOM 的方式对脚本性能会产生非常大的影响。为保证应用流畅地运行，在为文档编写和应用脚本时，需要注意一些问题。
另一个需要注意的地方，就是要尽量减少文档中的标记数量。过多不必要的元素只会增加 DOM 树的规模。进而增加 DOM 树以查找特定元素的时间。

### 合并和放置脚本

把多个脚本合并到一个脚本文件中。这样，就可以减少加载页面时，发送的请求数量。而减少请求数量通常都是在性能优化时首先要考虑的。
把所有 script 标签都放到文档末尾，\</body>标记之前，就可以让页面变得更快。

### 压缩脚本

所谓压缩脚本，指的是把脚本文件中不必要的字节，如空格和注释，统统删除，从而达到“压缩”文件的目的。好在，有很多工具都可以替你来做这件事。有的精简程序甚至会重写你的部分代码，使用更短的变量名，从而减少整体文件的大小。通常最好在精简副本的文件名中加上 min 字样。
